<h1>Book Search</h1>

<p *ngIf="!results"><em>Loading...</em></p>

<div *ngIf="results">
  <div style="padding-bottom:5px;" class="input-group">
    <input type="text" #searchValue (keyup)="onKey(searchValue.value)" (keyup.enter)="search(searchValue.value,1)" class="form-control" />
    <div class="input-group-append">
      <button class="btn btn-info" (click)="search(searchValue.value,1)">Search</button>
    </div>
  </div>
  <div class="clearfix">
    <div style="float:left;">
      Your search returned {{ results.response.numFound }} results
    </div>
    <div class="button-row" style="float:right;">
      <a class="btn btn-primary" [routerLink]="['/book-add']">Add</a>
    </div>
  </div>

  <div id="facets" *ngFor="let facet of results.facet_counts.facet_ranges.average_rating.rangeCounts">
    <div *ngIf="facet.count != 0">
      <span>{{facet.start}}-{{facet.end}} ({{facet.count}})</span>
    </div>
  </div>

  <div *ngFor="let book of results.response.docs">
    <div style="border:black 1px solid; margin-bottom:10px; padding:5px;">
      <h4><a [routerLink]="['/book/', book.id]">{{ book.title}}</a></h4>
      <div>
        <span>Author: {{book.author}}</span><br />
        <span>ISBN: {{book.isbn}}</span>
      </div>
    </div>
  </div>

  <div>
    <ngb-pagination class="d-flex justify-content-center"
                    [collectionSize]="results.response.numFound"
                    [(page)]="page" [pageSize]="10"
                    [maxSize]="5" [boundaryLinks]="true"
                    (pageChange)="search(searchValue.value, page)">

    </ngb-pagination>
  </div>

</div>



